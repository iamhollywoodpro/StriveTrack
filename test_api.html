<!DOCTYPE html>
<html>
<head>
    <title>API Test</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: white; }
        .result { background: #333; padding: 15px; margin: 10px 0; border-radius: 5px; }
        button { padding: 10px 20px; margin: 5px; }
    </style>
</head>
<body>
    <h1>Media API Test</h1>
    <button onclick="testEnhancedAPI()">Test Enhanced Media API</button>
    <button onclick="testWithStats()">Test With Stats</button>
    
    <div id="results"></div>

    <script>
        async function testEnhancedAPI() {
            const results = document.getElementById('results');
            results.innerHTML = '<div class="result">Testing Enhanced API...</div>';
            
            try {
                const response = await fetch('/api/media/enhanced', {
                    headers: { 'x-session-id': 'test-session' }
                });
                
                const data = await response.json();
                results.innerHTML = `
                    <div class="result">
                        <h3>Response Status: ${response.status}</h3>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    </div>
                `;
            } catch (error) {
                results.innerHTML = `<div class="result">Error: ${error.message}</div>`;
            }
        }
        
        async function testWithStats() {
            const results = document.getElementById('results');
            results.innerHTML = '<div class="result">Testing With Stats...</div>';
            
            try {
                const response = await fetch('/api/media/enhanced?stats=true', {
                    headers: { 'x-session-id': 'test-session' }
                });
                
                const data = await response.json();
                results.innerHTML = `
                    <div class="result">
                        <h3>Response Status: ${response.status}</h3>
                        <h4>Media Items (${data.media?.length || 0}):</h4>
                        ${data.media?.map(item => `
                            <div style="border: 1px solid #555; margin: 5px; padding: 10px;">
                                ID: ${item.id}<br>
                                Type: ${item.media_type}<br>
                                File: ${item.filename}<br>
                                Description: ${item.description}
                            </div>
                        `).join('') || 'No media'}
                        <h4>Stats:</h4>
                        <pre>${JSON.stringify(data.stats, null, 2)}</pre>
                    </div>
                `;
            } catch (error) {
                results.innerHTML = `<div class="result">Error: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>